# 2. Application layer

## 네트워크 애플리케이션의 원리
## 2.1.1 네트워크 애플리케이션 구조

### 클라이언트-서버 구조
- 항상 동작하고 있는 호스트를 서버(server)라고 부르며, 서버와의 서비스는 클라이언트(client)라는 다른 호스트들로부터 서비스 요청을 받는다.
- 클라이언트는 가끔 또는 항상 켜져 있을 수 있다.
- **클라이언트는 서로 직접 통신하지 않는다.**
    >예시. 웹 애플리케이션  
웹 서버가 클라이언트 호스트로부터 객체를 요청받으면 웹서버는 요청된 객체를 클라이언트 호스트로부터 객체를 요청받으면서 응답한다.
- **서버가 고정 IP 주소라는 잘 알려진 주소를 갖는다.**


- 하나의 클라이언트-서버 애플리케이션에서 하나의 서버 호스트가 자신의 클라이언트로부터 오는 모든 요청을 다 응답하는 것은 불가능하다. 이러한 이유로 많은 수의 호스트를 갖춘 **데이터 센터(data center)** 가 상력한 가상의 서버를 생성하는 역할로 사용된다.
  > 서비스 제공자들은 데이터 센터로부터 데이터를 보내기 위해 상호 연결과 대역폭에 합당한 비용을 지불해야한다.

### P2P  구조
- 항상 켜져 있는 인프라스트럭펴 서버에 최초로 의존한다. 대신 애플리케이션은 피어(peer)라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하게 한다.
- **자가 확장성(self-scalability)**
  > P2P 파일공유 애플리케이션에서는 비록 각 피어들이 파일을 요구함으로써 작업 부하를 만들어낸다. 하지만 각 피어들은 파일을 다른 피어들에게 분배함으로써 그 시스템에 서비스 능력을 추가한다.
- 비용 효율적
  > 서버 인프라스트럭쳐와 서버 대역폭을 요구하지 않기 때문이다.


## 2.1.2 프로세스간 통신
실제 통신하는 것은 프로그램이 아니라 프로세스(process)이다.
프로세스 간의 통신을 위한 규칙은 종단 시스템의 운영체제에 의해 좌우된다.

### 클라이언트와 서버 프로세스
- in web
  - 웹 브라우: 클라이언트
  - 웹 서버: 서버

- P2P
  - 파일 다운로드 피어: 클라이언트
  - 파일 업로드 피어: 서버

- 클라이언트와 서버 프로세스에 대한 정의
~~~
두 프로세스 간의 통신 세션에서 통신을 초기화하는 프로세스를 클라이언트라 하고, 세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고 한다.
~~~

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스
- 프로세스는 소켓을 통해 네트워크로 메세지를 보내고 받는다.
- 소켓은 호스트의 애플리케이션 계층과 트랜스포트 게층 간의 인터페이스다.(애플리케이션과 네트워크 사이의 API)
- 애플리케이션 개발자는 소켓의 애플리케이션 계층에 대한 모든 통제권을 갖지만 소켓의 트랜스포트 계층에 대한 통제권은 거의 갖지 못한다.(프로토콜선택, 최대버퍼 등의 매개변수 설정뿐)

### 프로세스 주소 배정
한 호스트 상에서 수행되고있는 프로세스가 패킷을 다른 호스트에서 수행되고 있는 프로세스로 패킷을 보내기 위해서는 수신 프로세스가 주소를 갖고 있어야 한다.

수신 프로세스를 식별하기 위해서는 다음의 두 가지 정보가 명시되어야 한다.
- 호스트의 주소
- 목적지 호스트 내의 수신 프로세스를 명시하는 식별자

IP주소는 32비트로 구성되며, 호스트를 유일하게 식별한다.

메세지가 전달되어야 하는 호스트의 주소를 아는 것과 더불어 송신 호스트는 수신 호스트에서 수행되고 있는 수신 프로세스(수신 소켓)도 식별 해야한다.
~~~
목적지 포트 번호(port number)가 수신 호스트에서 수행되고 있는 수신 프로세스(수신 소켓) 식별을 위해 사용된다.
~~~